<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Test</title>
    <!-- Include Tailwind CSS and Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a7ad42ee25.js" crossorigin="anonymous"></script>
    <!-- Link to your custom CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-gray-100">
    <div class="area h-screen">
        <ul class="circles h-screen">
            <!-- Your background circles -->
            <li></li>
            <!-- Repeat as needed -->
        </ul>
    </div>
    <div class="pt-12">
        {% if portal %}
        <div class="xl:w-1/3 lg:w-[60%] md:w-[80%] w-[90%] bg-blue-100 rounded p-5 m-auto">
            <header class="py-2">
                <h2 class="text-blue-500 text-3xl text-center font-bold">{{ current_unit }}</h2>
            </header>
            <form class="flex flex-col justify-center items-center bg-white p-3">
                <div class="w-full mb-6">
                    <label for="unit-1" class="block mb-2 text-blue-500">ETT</label>
                    <input type="number" required id="unit-1" class="w-full p-2 text-blue-700 border-b-2 border-blue-500 outline-none focus:bg-gray-300">
                </div>
                <div class="w-full mb-6">
                    <label for="unit-2" class="block mb-2 text-blue-500">FA</label>
                    <input type="number" required id="unit-2" class="w-full p-2 text-blue-700 border-b-2 border-blue-500 outline-none focus:bg-gray-300">
                </div>
                <div class="w-full mb-6">
                    <label for="unit-3" class="block mb-2 text-blue-500">JAVA</label>
                    <input type="number" required id="unit-3" class="w-full p-2 text-blue-700 border-b-2 border-blue-500 outline-none focus:bg-gray-300">
                </div>
                <div class="w-full mb-6">
                    <label for="unit-4" class="block mb-2 text-blue-500">NSM</label>
                    <input type="number" required id="unit-4" class="w-full p-2 text-blue-700 border-b-2 border-blue-500 outline-none focus:bg-gray-300">
                </div>
            </form>
            <!-- Submit button triggers the Ajax request -->
            <button type="button" class="w-full bg-blue-700 hover:bg-pink-700 text-white font-bold py-2 px-4 mb-6 rounded" onclick="sendMarks()">Submit</button>
            <!-- Display message here -->
            <p id="msg" class="text-center text-blue-500 font-bold"></p>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            function sendMarks() {
                const ETT = document.getElementById('unit-1').value;
                const FA = document.getElementById('unit-2').value;
                const JAVA = document.getElementById('unit-3').value;
                const NSM = document.getElementById('unit-4').value;

                // Ajax request
                $.ajax({
                    url: "/unit_test",
                    type: "POST",
                    data: {
                        ETT: ETT,
                        FA: FA,
                        JAVA: JAVA,
                        NSM: NSM
                    },
                    success: function(data) {
                        // Update message
                        document.getElementById('msg').textContent = "Marks Submitted!";
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        console.error("Error:", textStatus, errorThrown);
                    }
                });
            }
        </script>
        {% endif %}
    </div>
</body>
</html>
